<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Interactive Romantic Card</title>

<style>
/* ======================================================
   PAGE SETUP
   ====================================================== */
html, body {
    width: 100%;
    height: 100%;
    margin: 0;
    overflow: hidden; /* no scrolling */
    background-color: lightpink;
}

/* Scene container */
#scene {
    position: relative;
    width: 100%;
    height: 100%;
}

/* Shared styling for all visual elements */
.item {
    position: absolute;
    left: 50%;
    transition:
        transform 0.9s ease,
        opacity 0.9s ease;
    transform-origin: center;
    cursor: pointer;
}

/* ======================================================
   POSITIONING
   ====================================================== */

/* Letter near bottom */
#letter {
    bottom: 80px;
    transform: translateX(-50%) scale(1);
    width: 110px; /* smallest element */
}

/* Emoji */
#emoji {
    bottom: 80px;
    width: 220px;
    opacity: 0;
    pointer-events: none;
}

/* Scroll */
#scroll {
    bottom: 80px;
    width: 260px; /* closed scroll */
    opacity: 0;
    pointer-events: none;
}

#scroll.open {
    width: 340px; /* open scroll is largest */
}

/* Rose */
#rose {
    bottom: 80px;
    width: 260px;
    opacity: 0;
    pointer-events: none;
}
</style>
</head>

<body>

<div id="scene">

    <img id="letter" class="item" src="letter_closed.png" alt="Letter">
    <img id="emoji" class="item" src="emoji.png" alt="Emoji">
    <img id="scroll" class="item" src="scroll_closed.png" alt="Scroll">
    <img id="rose" class="item" src="rose.png" alt="Rose">

</div>

<audio id="clickSound" src="click.mp3"></audio>

<script>
/* ======================================================
   STATE DEFINITIONS
   ======================================================
   0 = initial (letter only)
   1 = emoji visible
   2 = emoji returned
   3 = closed scroll visible
   4 = open scroll visible
   5 = scroll returned
   6 = rose visible (final)
====================================================== */
let interactionState = 0;

/* ======================================================
   ELEMENT REFERENCES
   ====================================================== */
const letter = document.getElementById("letter");
const emoji = document.getElementById("emoji");
const scroll = document.getElementById("scroll");
const rose = document.getElementById("rose");
const clickSound = document.getElementById("clickSound");

/* ======================================================
   SOUND HANDLING (NO OVERLAP)
   ====================================================== */
function playClickSound() {
    clickSound.pause();
    clickSound.currentTime = 0;
    clickSound.play();
}

/* ======================================================
   INITIAL HIDDEN STATES
   ====================================================== */
emoji.style.transform = "translate(-50%, 0) scale(0)";
scroll.style.transform = "translate(-50%, 0) scale(0)";
rose.style.transform  = "translate(-50%, 0) scale(0)";

/* ======================================================
   LETTER CLICK LOGIC
   ====================================================== */
letter.addEventListener("click", () => {
    playClickSound();

    /* CLICK 1 — Emoji emerges */
    if (interactionState === 0) {
        letter.src = "letter_open.png";

        emoji.style.opacity = 1;
        emoji.style.transform =
            "translate(-50%, -160px) scale(1)";
        
        setTimeout(() => {
            letter.src = "letter_closed.png";
        }, 400);

        interactionState = 1;
    }

    /* CLICK 2 — Emoji returns */
    else if (interactionState === 1) {
        emoji.style.transform =
            "translate(-50%, 0) scale(0)";
        emoji.style.opacity = 0;

        interactionState = 2;
    }

    /* CLICK 3 — Closed scroll emerges */
    else if (interactionState === 2) {
        scroll.src = "scroll_closed.png";
        scroll.classList.remove("open");

        scroll.style.opacity = 1;
        scroll.style.pointerEvents = "auto";
        scroll.style.transform =
            "translate(-50%, -180px) scale(1)";

        interactionState = 3;
    }

    /* CLICK 6 — Letter transforms into rose */
    else if (interactionState === 5) {
        letter.style.transform =
            "translateX(-50%) scale(0.05) rotate(720deg)";
        letter.style.opacity = 0;
        letter.style.pointerEvents = "none";

        rose.style.opacity = 1;
        rose.style.pointerEvents = "auto";
        rose.style.transform =
            "translate(-50%, -120px) scale(1) rotate(-720deg)";

        interactionState = 6;
    }
});

/* ======================================================
   SCROLL CLICK LOGIC
   ====================================================== */
scroll.addEventListener("click", () => {
    playClickSound();

    /* CLICK 4 — Scroll opens */
    if (interactionState === 3) {
        scroll.src = "scroll_open.png";
        scroll.classList.add("open");

        interactionState = 4;
    }

    /* CLICK 5 — Scroll returns */
    else if (interactionState === 4) {
        scroll.style.transform =
            "translate(-50%, 0) scale(0)";
        scroll.style.opacity = 0;
        scroll.style.pointerEvents = "none";

        interactionState = 5;
    }
});

/* ======================================================
   FINAL ROSE CLICK
   ====================================================== */
rose.addEventListener("click", () => {
    playClickSound();
    window.open("https://music.youtube.com/watch?v=cpyKmRKW0f0&si=mjfe62L73kKaACd9", "_blank");
});
</script>

</body>
</html>
